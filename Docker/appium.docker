FROM openjdk:8-jre-alpine


ENV APPIUM_VERSION "0.17.6"

RUN apk add --no-cache bash
RUN apk add --no-cache python3
RUN apk add --no-cache --update \
    python3 nodejs-current-npm

RUN npm install -g appium --unsafe-perm=true --allow-root
#RUN avm $APPIUM_VERSION

RUN apk del nodejs
RUN apk del python3

RUN apk --update-cache --repository http://dl-3.alpinelinux.org/alpine/edge/testing/ add android-tools

EXPOSE 4723 5037

CMD /usr/bin/adb start-server && appium
